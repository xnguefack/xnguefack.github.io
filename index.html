<!DOCTYPE html>
<html>
<head>
    <title>Air Quality Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <h1>Air Quality Map</h1>
    <!-- Add a search box and a placeholder for city suggestions -->
    <div style="padding:10px;">
        <label for="city-input">Search for a city:</label>
        <input type="text" id="city-input" placeholder="Start typing a city..." style="width: 250px;" />
        <ul id="suggestions" style="list-style: none; padding: 5px 0; margin: 0;"></ul>
    </div>
    <!-- Map and Radar layout -->
    <div id="layout" style="display: flex; flex-direction: row; gap: 20px; align-items: flex-start;">
        <!-- Left: Map and charts -->
        <div style="flex: 2;">
            <div id="map" style="height: 600px;"></div>
            <h3>Air Quality Trends (Next 24 Hours) - Click on each graph for enlarge view</h3>
            <div id="charts" style="padding: 20px;">
                <canvas id="chart-pm10" height="150"></canvas>
                <canvas id="chart-pm25" height="150"></canvas>
                <canvas id="chart-co" height="150"></canvas>
            </div>
        </div>

        <!-- Right: Radar chart -->
        <div style="flex: 1; padding-right: 20px;">
            <h3>Air Quality Radar (Normalized)</h3>
            <canvas id="radarChart" width="150" height="150"></canvas>
        </div>
    </div>

    <p id="timestamp" style="padding: 10px; font-style: italic; color: #444;"></p>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="{{ url_for('static', filename='js/map.js') }}"></script>
</body>

<!-- Modal container -->
<div id="chartModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background-color:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:1000;">
    <div style="background:white; padding:20px; border-radius:10px; max-width:90vw; max-height:90vh; position:relative;">
        <span id="closeModal" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:20px;">âœ–</span>
        <canvas id="modalChart" width="800" height="400"></canvas>
    </div>
</div>

</html>
